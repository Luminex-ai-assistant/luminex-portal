<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luminex Command Portal</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Audit Mode Banner -->
    <div class="audit-banner hidden" id="auditBanner">
        <i class="fas fa-eye"></i>
        <span>Audit Mode: Viewing as <strong id="auditUserName"></strong></span>
        <button class="btn btn-sm btn-secondary" id="exitAuditBtn">Exit Audit</button>
    </div>

    <div class="app">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <div class="logo">
                    <i class="fas fa-bolt"></i>
                    <span>LUMINEX COMMAND</span>
                </div>
                <nav class="nav-tabs">
                    <button class="nav-tab active" data-view="board">Board</button>
                    <button class="nav-tab" data-view="projects">Projects</button>
                    <button class="nav-tab" data-view="cron">Cron Jobs</button>
                    <button class="nav-tab" data-view="notifications">
                        Notifications
                        <span class="notification-badge hidden" id="notificationCount">0</span>
                    </button>
                </nav>
            </div>
            <div class="header-right">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search tasks..." id="searchInput">
                </div>
                <button class="btn btn-primary" id="addTaskBtn">
                    <i class="fas fa-plus"></i> New Task
                </button>
                <button class="btn btn-icon" id="notificationBtn">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge hidden" id="headerNotificationCount">0</span>
                </button>
                <div class="user-menu">
                    <button class="user-menu-btn" id="userMenuBtn">
                        <span class="user-avatar" id="userAvatar">OT</span>
                        <span class="user-name" id="userName">Tag</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="user-dropdown hidden" id="userDropdown">
                        <div class="dropdown-section">
                            <button class="dropdown-item" id="profileBtn">
                                <i class="fas fa-user"></i> Profile
                            </button>
                        </div>
                        <div class="dropdown-section hidden" id="adminMenu">
                            <div class="dropdown-label">Admin</div>
                            <button class="dropdown-item" id="auditModeBtn">
                                <i class="fas fa-eye"></i> Audit Mode
                            </button>
                        </div>
                        <div class="dropdown-section">
                            <button class="dropdown-item text-danger" id="logoutBtn">
                                <i class="fas fa-sign-out-alt"></i> Logout
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Filters Bar -->
        <div class="filters-bar">
            <div class="filter-group">
                <label>Project:</label>
                <select id="projectFilter">
                    <option value="all">All Projects</option>
                </select>
            </div>
            <div class="stats">
                <span class="stat">
                    <span class="stat-number" id="totalTasks">0</span> tasks
                </span>
                <span class="stat">
                    <span class="stat-number overdue" id="overdueTasks">0</span> overdue
                </span>
            </div>
        </div>

        <!-- Kanban Board View -->
        <main class="board" id="kanbanView">
            <div class="column" data-status="backlog">
                <div class="column-header">
                    <h3><i class="fas fa-inbox"></i> Backlog</h3>
                    <span class="count">0</span>
                </div>
                <div class="column-content" id="backlogColumn"></div>
            </div>
            <div class="column" data-status="todo">
                <div class="column-header">
                    <h3><i class="fas fa-circle"></i> To Do</h3>
                    <span class="count">0</span>
                </div>
                <div class="column-content" id="todoColumn"></div>
            </div>
            <div class="column" data-status="inprogress">
                <div class="column-header">
                    <h3><i class="fas fa-spinner"></i> In Progress</h3>
                    <span class="count">0</span>
                </div>
                <div class="column-content" id="inprogressColumn"></div>
            </div>
            <div class="column" data-status="review">
                <div class="column-header">
                    <h3><i class="fas fa-eye"></i> Review</h3>
                    <span class="count">0</span>
                </div>
                <div class="column-content" id="reviewColumn"></div>
            </div>
            <div class="column" data-status="done">
                <div class="column-header">
                    <h3><i class="fas fa-check-circle"></i> Done</h3>
                    <span class="count">0</span>
                </div>
                <div class="column-content" id="doneColumn"></div>
            </div>
        </main>

        <!-- Projects View -->
        <main class="projects-view hidden" id="projectsView">
            <div class="projects-header">
                <h2>Projects</h2>
                <button class="btn btn-primary" id="newProjectBtn">
                    <i class="fas fa-plus"></i> New Project
                </button>
            </div>
            <div class="projects-grid" id="projectsGrid"></div>
        </main>

        <!-- Cron Jobs View -->
        <main class="cron-view hidden" id="cronView">
            <div class="cron-header">
                <h2>Scheduled Jobs</h2>
                <p class="cron-subtitle">Automated tasks across your projects</p>
            </div>
            <div class="cron-list" id="cronList"></div>
        </main>

        <!-- Notifications View -->
        <main class="notifications-view hidden" id="notificationsView">
            <div class="notifications-header">
                <h2>Notifications</h2>
                <button class="btn btn-secondary" id="markAllReadBtn">
                    <i class="fas fa-check-double"></i> Mark All Read
                </button>
            </div>
            <div class="notifications-list" id="notificationsList"></div>
        </main>
    </div>

    <!-- Task Modal -->
    <div class="modal hidden" id="taskModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">New Task</h2>
                <button class="btn-close">&times;</button>
            </div>
            <form id="taskForm">
                <input type="hidden" id="taskId">
                <div class="form-group">
                    <label>Title</label>
                    <input type="text" id="taskTitle" required placeholder="Task title...">
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea id="taskDescription" rows="3" placeholder="Add details..."></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Project</label>
                        <select id="taskProject"></select>
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <select id="taskStatus">
                            <option value="backlog">Backlog</option>
                            <option value="todo">To Do</option>
                            <option value="inprogress">In Progress</option>
                            <option value="review">Review</option>
                            <option value="done">Done</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Priority</label>
                        <select id="taskPriority">
                            <option value="P2">P2 - Normal</option>
                            <option value="P1">P1 - High</option>
                            <option value="P0">P0 - Critical</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Assignee</label>
                        <select id="taskAssignee"></select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Due Date</label>
                        <input type="date" id="taskDueDate">
                    </div>
                    <div class="form-group">
                        <label>Tags</label>
                        <input type="text" id="taskTags" placeholder="comma, separated, tags">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary cancel-btn">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Task</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Profile Modal -->
    <div class="modal hidden" id="profileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Profile Settings</h2>
                <button class="btn-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="profile-avatar-section">
                    <div class="profile-avatar" id="profileAvatar">OT</div>
                    <button class="btn btn-secondary btn-sm">Change Avatar</button>
                </div>
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="profileUsername" disabled>
                </div>
                <div class="form-group">
                    <label>Display Name</label>
                    <input type="text" id="profileDisplayName" placeholder="Your display name">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="profileEmail" placeholder="your@email.com">
                </div>
                <div class="form-divider"></div>
                <h4>Change Password</h4>
                <div class="form-group">
                    <label>Current Password</label>
                    <input type="password" id="currentPassword" placeholder="Current password">
                </div>
                <div class="form-group">
                    <label>New Password</label>
                    <input type="password" id="newPassword" placeholder="New password">
                </div>
                <div class="form-group">
                    <label>Confirm New Password</label>
                    <input type="password" id="confirmPassword" placeholder="Confirm new password">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary cancel-btn">Cancel</button>
                <button class="btn btn-primary" id="saveProfileBtn">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- Audit Mode Modal -->
    <div class="modal hidden" id="auditModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Audit Mode</h2>
                <button class="btn-close">&times;</button>
            </div>
            <div class="modal-body">
                <p class="audit-description">Select a user to view the portal as they would see it. This helps verify permissions and access controls.</p>
                <div class="form-group">
                    <label>Select User</label>
                    <select id="auditUserSelect">
                        <option value="">Select a user...</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary cancel-btn">Cancel</button>
                <button class="btn btn-primary" id="startAuditBtn">Start Audit</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
